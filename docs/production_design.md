# Cafe Match Tycoon - 프로덕션 디자인 문서

> game_id: game_0004
> repo: mg-game-0004
> title_kr: 카페 매치 타이쿤
> title_en: Cafe Match Tycoon
> genre_tags: match3, simulation, idle
> doc_type: production_design
> source_of_truth: docs/design/gdd_game_0004.json
> last_updated: 2025-12-19

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **매치3 퍼즐** | 연쇄 콤보와 특수 블록 조합의 쾌감 | ★★★★★ |
| **카페 경영** | 나만의 카페를 꾸미고 운영하는 재미 | ★★★★☆ |
| **성장 만족** | 카페가 발전하는 모습을 보는 보람 | ★★★★☆ |
| **수집 욕구** | 다양한 메뉴와 인테리어 수집 | ★★★☆☆ |

### 1.2 만족감 요소 (Satisfaction)
- **콤보 폭발**: 대규모 연쇄 시 화려한 이펙트
- **메뉴 완성**: 새 메뉴 개발 시 손님 반응
- **손님 만족**: 주문 완료 시 긍정적 피드백
- **수익 달성**: 일일 매출 목표 달성

### 1.3 도전 요소 (Challenge)
```
도전 구조:
├── 제한된 이동 횟수 내 목표 달성
├── 특수 블록 퍼즐 (얼음, 체인 등)
├── 시간 제한 이벤트
├── 손님 특별 주문 (까다로운 조건)
└── 주간 챌린지 스테이지
```

### 1.4 사회적 요소 (Social)
- **카페 방문**: 친구 카페 방문하여 팁 획득
- **리뷰 시스템**: 다른 플레이어 카페 평가
- **랭킹**: 일일 수익/퍼즐 점수 랭킹
- **선물 교환**: 친구에게 재료 선물

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (1~2분)
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [퍼즐 시작] → [블록 매치] → [재료 획득]          │
│       ↑                            ↓             │
│       └──── [카페 운영] ← [메뉴 제작] ←┘         │
└─────────────────────────────────────────────────┘
```

**단계별 상세:**
1. **퍼즐 시작** (2초): 스테이지 목표 확인
2. **블록 매치** (30~90초): 매치3 퍼즐 플레이
3. **재료 획득** (3초): 매치한 블록에 따른 재료 획득
4. **메뉴 제작** (5초): 재료로 메뉴 제작
5. **카페 운영** (지속): 손님에게 메뉴 판매

### 2.2 세션 루프 (5~10분)
```
[접속] → [방치 수익] → [퍼즐 플레이] → [재료 수집] → [메뉴 개발]
                             ↓                           ↓
                      [손님 응대]              [인테리어 배치]
```

**세션 구성:**
- 방치 수익 확인: 30초
- 퍼즐 3~5회: 3~6분
- 메뉴 제작: 1~2분
- 카페 관리: 1~2분

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [퍼즐 클리어] → [재료 수집] → [메뉴 해금]             │
│         ↓                              ↓             │
│  [카페 확장]                    [프레스티지 전환]      │
│         ↓                              ↓             │
│  [프리미엄 손님 등장] ←────────────────┘              │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[메인 카페 화면] ────→ [상점]
    │                   [도감]
    │                   [친구]
    │                   [설정]
    ↓
[퍼즐 맵] → [스테이지 선택]
                ↓
           [퍼즐 플레이]
                ↓
           [결과 화면]
                ↓
           [카페로 복귀]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 45% | 하트 충전, 재료 2배, 추가 이동 |
| **인테리어** | 25% | 프리미엄 가구, 테마 팩 |
| **편의 기능** | 15% | 무한 하트, 빠른 생산 |
| **광고 제거** | 10% | 일회성 구매 |
| **특별 메뉴** | 5% | 한정 레시피 |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 스테이지 클리어 가능
├── 기본 인테리어 사용
├── 하트 충전 대기 (30분당 1개)
└── 광고로 추가 이동 획득

과금 유저 혜택:
├── 광고 제거 ($3.99)
├── 무한 하트 팩 ($9.99/월)
├── 프리미엄 인테리어 팩 ($2.99~$9.99)
├── 재료 부스터 ($1.99)
└── VIP 패스 ($11.99/월)
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 보석 (50) | $0.99 | 하트 5개 |
| 중량 보석 (300) | $4.99 | 20% 보너스 |
| 대량 보석 (700) | $9.99 | 35% 보너스 |
| 광고 제거 | $3.99 | 영구 적용 |
| 무한 하트 | $9.99/월 | 하트 무제한 |
| 스타터 팩 | $2.99 | 보석 200 + 인테리어 세트 |

### 3.4 리텐션 메커니즘
- **일일 보상**: 출석 체크 (7일 사이클)
- **일일 퀘스트**: 퍼즐 클리어, 메뉴 판매, 손님 응대
- **주간 이벤트**: 테마 카페 이벤트
- **시즌**: 시즌별 한정 인테리어

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
난이도
  ▲
  │                              ╭──────
  │                         ╭────╯
  │                    ╭────╯
  │               ╭────╯    <- 보스 스테이지 (매 10레벨)
  │          ╭────╯
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 스테이지
    1   20   40   60   80  100  120
```

**난이도 공식:**
```
이동_횟수 = max(10, 25 - 스테이지/10)
목표_점수 = 1000 × (1 + 스테이지 × 0.15)
장애물_수 = min(스테이지/5, 20)
```

### 4.2 콘텐츠 진행
| 챕터 | 스테이지 | 새로운 요소 |
|------|----------|-------------|
| 1. 시작 | 1-20 | 기본 매치, 일반 손님 |
| 2. 성장 | 21-40 | 특수 블록, 단골 손님 |
| 3. 확장 | 41-60 | 체인 블록, 테이크아웃 |
| 4. 인기 | 61-80 | 얼음 블록, VIP 손님 |
| 5. 명소 | 81-100 | 복합 장애물, 평론가 |
| 6. 전설 | 101+ | 하드 모드, 특별 이벤트 |

### 4.3 밸런싱 공식
```dart
// 스테이지 점수 계산
int calculateScore(List<Match> matches) {
  int base = matches.length * 100;
  int combo = comboMultiplier(matches.comboCount);
  int special = specialBlockBonus(matches);
  return base * combo + special;
}

// 콤보 배율
double comboMultiplier(int combo) {
  return 1.0 + (combo - 1) * 0.1; // 콤보당 10% 증가
}

// 카페 수익 계산
int cafeRevenuePerHour(Cafe cafe) {
  int baseRevenue = cafe.menuCount * 50;
  double satisfactionBonus = cafe.satisfaction / 100;
  return (baseRevenue * (1 + satisfactionBonus)).toInt();
}
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 스테이지 골드 | 클리어 | 별 × 100 |
| 재료 | 블록 매치 | 매치당 1~3개 |
| 별 | 클리어 점수 | 1~3개 |
| 보석 | 챕터 완료 | 50~200 |
| 특별 아이템 | 보스 클리어 | 희귀 재료/인테리어 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 현재 골드/보석/하트
├── 카페 만족도
├── 진행 중인 주문
└── 알림 배지

레벨 2 (상호작용 시):
├── 퍼즐 목표/이동 횟수
├── 메뉴 레시피
├── 손님 요구사항
└── 인테리어 배치

레벨 3 (팝업):
├── 스테이지 결과
├── 메뉴 완성
├── 설정 메뉴
└── 구매 확인
```

### 5.2 네비게이션 흐름
```
[메인 카페]
    ├── [퍼즐] → [맵] → [스테이지] → [플레이] → [결과]
    ├── [메뉴] → [레시피 목록] → [제작]
    ├── [인테리어] → [배치 모드]
    ├── [손님] → [주문 목록] → [서빙]
    ├── [상점] → [아이템/보석/패키지]
    └── [설정] → [옵션]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 블록 매치 | 블록 폭발 | 매치음 | - |
| 콤보 | 연쇄 이펙트 | 콤보음 상승 | 진동 (약) |
| 특수 블록 | 화려한 폭발 | 특수 효과음 | 진동 (중) |
| 스테이지 클리어 | 별 획득 연출 | 승리 BGM | 진동 (중) |
| 손님 만족 | 하트 이펙트 | 만족음 | - |

### 5.4 접근성
- **힌트 시스템**: 막힐 때 힌트 제공
- **색맹 모드**: 블록에 모양 추가
- **폰트 크기**: 3단계 조절
- **효과 감소**: 시각 효과 줄이기 옵션
- **원핸드 모드**: 세로 전용 UI

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [ ] 매치3 퍼즐 엔진
- [ ] 특수 블록 시스템
- [ ] 카페 경영 시스템
- [ ] 메뉴 제작
- [ ] 손님 응대
- [ ] 방치 수익

### 콘텐츠
- [ ] 120+ 스테이지
- [ ] 50+ 메뉴
- [ ] 100+ 인테리어
- [ ] 튜토리얼
- [ ] 스토리 이벤트

### 메타 시스템
- [ ] 프레스티지 시스템
- [ ] 일일/주간 퀘스트
- [ ] 도전과제
- [ ] 설정 화면
- [ ] 친구 시스템

### 수익화
- [ ] 광고 SDK
- [ ] IAP 상품
- [ ] 상점 UI
- [ ] 시즌 패스

### QA/최적화
- [ ] 퍼즐 밸런싱
- [ ] 성능 최적화
- [ ] 메모리 관리
- [ ] 크래시 리포팅

### 출시 준비
- [ ] 스토어 에셋
- [ ] 앱 설명
- [ ] 법적 문서
- [ ] 소프트 런칭

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 45% | Firebase Analytics |
| D7 리텐션 | 20% | Firebase Analytics |
| D30 리텐션 | 8% | Firebase Analytics |
| 세션 길이 | 7분 | 평균 세션 시간 |
| 일일 세션 | 4회 | DAU / 세션 수 |
| ARPU | $0.12~0.18 | 총 매출 / DAU |
| 광고 시청률 | 60~70% | 광고 노출 / DAU |
| 결제 전환율 | 3~5% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-19*
